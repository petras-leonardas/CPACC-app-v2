import React from 'react'
import { brand, base } from '../../tokens'

export interface LogoProps {
  /**
   * Logo variant
   */
  variant?: 'icon' | 'full'
  /**
   * Logo width (height auto-calculated to maintain aspect ratio)
   */
  width?: number
  /**
   * Additional CSS class
   */
  className?: string
}

/**
 * CPACC Mastery Logo Component
 * 
 * Theme-aware logo that automatically switches colors based on light/dark mode.
 * Colors are pulled directly from design system tokens.
 * 
 * @example
 * // Icon only
 * <Logo variant="icon" width={48} />
 * 
 * // Full logo with text
 * <Logo variant="full" width={200} />
 */
export const Logo = React.forwardRef<SVGSVGElement, LogoProps>(
  ({ variant = 'full', width = 200, className }, ref) => {
    const [isDark, setIsDark] = React.useState(false)

    // Detect dark mode
    React.useEffect(() => {
      const checkDarkMode = () => {
        setIsDark(document.documentElement.classList.contains('dark'))
      }
      checkDarkMode()
      
      const observer = new MutationObserver(checkDarkMode)
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class'],
      })
      return () => observer.disconnect()
    }, [])

    // Theme-aware colors from design tokens
    const colors = {
      orange: isDark ? brand.orange[400] : brand.orange[500],  // #F39C52 / #E67E22
      navy: isDark ? base.gray[100] : brand.navy[500],         // #F3F4F6 / #353A56
      teal: isDark ? brand.teal[300] : brand.teal[400],        // #92C5CC / #7BAEB5
      dark: isDark ? base.gray[200] : '#08193B',               // #E5E7EB / #08193B
    }

    if (variant === 'icon') {
      return (
        <svg
          ref={ref}
          width={width}
          height={width}
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className={className}
          aria-label="CPACC Mastery Icon"
          role="img"
        >
          {/* Person head - Orange */}
          <path
            d="M17.9475 0.868025C14.0901 2.77765 14.3193 8.35374 18.2913 10.4161C20.5064 11.5619 23.4854 10.6835 24.9368 8.43012C25.8152 7.09339 25.8152 4.11438 24.9368 2.77765C23.4473 0.447909 20.4301 -0.354132 17.9475 0.868025Z"
            fill={colors.orange}
          />
          
          {/* Person body/shoulders curve - Orange */}
          <path
            d="M17.4511 12.0957C14.3193 12.5159 12.1423 13.2033 9.77438 14.4637C7.29188 15.7622 4.12191 18.7794 4.6566 19.3141C5.11491 19.7342 10.1945 21.2619 11.1493 21.2619C11.493 21.2619 12.3333 20.8418 12.9444 20.3071C15.4269 18.2065 17.0309 17.6336 20.5065 17.6336C23.982 17.6336 25.1659 18.0538 27.763 20.1543C28.4887 20.7654 29.3289 21.2619 29.6726 21.2619C30.5129 21.2619 35.898 19.6578 36.3563 19.2759C36.891 18.8176 33.1481 15.4949 30.7038 14.2727C26.8082 12.4013 21.5376 11.5228 17.4511 12.0957Z"
            fill={colors.orange}
          />
          
          {/* Left book page - Navy (light) / Lighter Navy (dark) */}
          <path
            d="M3.1289 22.4844C3.01432 22.79 2.97613 25.7308 3.01432 29.0917L3.1289 35.1643L10.3855 37.3795C14.3957 38.6016 17.9476 39.5946 18.3295 39.5946C18.9024 39.5946 18.9788 39.0599 18.9788 33.6748C18.9788 28.0223 18.9406 27.6786 18.1385 26.8766C17.5274 26.2655 15.2359 25.4252 10.7674 24.1649C7.21549 23.1337 4.04552 22.2171 3.81636 22.1407C3.54902 22.0261 3.24348 22.1789 3.1289 22.4844Z"
            fill={isDark ? brand.navy[400] : brand.navy[500]}
          />
          
          {/* Right book page - Teal */}
          <path
            d="M35.2105 22.5993C34.3703 22.9049 31.4677 23.7833 28.7178 24.5472C25.0132 25.6165 23.4855 26.2658 22.7216 27.0297L21.6522 28.0609V33.8279C21.6522 36.9597 21.805 39.6332 21.9578 39.7477C22.1105 39.8241 25.7006 38.8311 29.8636 37.5326L37.5021 35.1646V28.7101C37.5021 24.7381 37.3493 22.2556 37.1202 22.1792C36.9292 22.141 36.0508 22.332 35.2105 22.5993Z"
            fill={colors.teal}
          />
        </svg>
      )
    }

    // Full logo with text
    const heightRatio = 40 / 112 // Aspect ratio from Figma
    const calculatedWidth = width
    const calculatedHeight = width * heightRatio
    
    return (
      <svg
        ref={ref}
        width={calculatedWidth}
        height={calculatedHeight}
        viewBox="0 0 112 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className={className}
        aria-label="CPACC Mastery Logo"
        role="img"
      >
        {/* Person head - Orange */}
        <path
          d="M17.9475 0.868025C14.0901 2.77765 14.3193 8.35374 18.2913 10.4161C20.5064 11.5619 23.4854 10.6835 24.9368 8.43012C25.8152 7.09339 25.8152 4.11438 24.9368 2.77765C23.4473 0.447909 20.4301 -0.354132 17.9475 0.868025Z"
          fill={colors.orange}
        />
        
        {/* Person body/shoulders - Orange */}
        <path
          d="M17.4511 12.0957C14.3193 12.5159 12.1423 13.2033 9.77438 14.4637C7.29188 15.7622 4.12191 18.7794 4.6566 19.3141C5.11491 19.7342 10.1945 21.2619 11.1493 21.2619C11.493 21.2619 12.3333 20.8418 12.9444 20.3071C15.4269 18.2065 17.0309 17.6336 20.5065 17.6336C23.982 17.6336 25.1659 18.0538 27.763 20.1543C28.4887 20.7654 29.3289 21.2619 29.6726 21.2619C30.5129 21.2619 35.898 19.6578 36.3563 19.2759C36.891 18.8176 33.1481 15.4949 30.7038 14.2727C26.8082 12.4013 21.5376 11.5228 17.4511 12.0957Z"
          fill={colors.orange}
        />
        
        {/* Left book page - Navy */}
        <path
          d="M3.1289 22.4844C3.01432 22.79 2.97613 25.7308 3.01432 29.0917L3.1289 35.1643L10.3855 37.3795C14.3957 38.6016 17.9476 39.5946 18.3295 39.5946C18.9024 39.5946 18.9788 39.0599 18.9788 33.6748C18.9788 28.0223 18.9406 27.6786 18.1385 26.8766C17.5274 26.2655 15.2359 25.4252 10.7674 24.1649C7.21549 23.1337 4.04552 22.2171 3.81636 22.1407C3.54902 22.0261 3.24348 22.1789 3.1289 22.4844Z"
          fill={isDark ? brand.navy[400] : brand.navy[500]}
        />
        
        {/* Right book page - Teal */}
        <path
          d="M35.2105 22.5993C34.3703 22.9049 31.4677 23.7833 28.7178 24.5472C25.0132 25.6165 23.4855 26.2658 22.7216 27.0297L21.6522 28.0609V33.8279C21.6522 36.9597 21.805 39.6332 21.9578 39.7477C22.1105 39.8241 25.7006 38.8311 29.8636 37.5326L37.5021 35.1646V28.7101C37.5021 24.7381 37.3493 22.2556 37.1202 22.1792C36.9292 22.141 36.0508 22.332 35.2105 22.5993Z"
          fill={colors.teal}
        />
        
        {/* Text: CPACC */}
        <path
          d="M63.2784 10.4375H60.7898C60.7443 10.1155 60.6515 9.82955 60.5114 9.57955C60.3712 9.32576 60.1913 9.10985 59.9716 8.93182C59.7519 8.75379 59.4981 8.61742 59.2102 8.52273C58.9261 8.42803 58.6174 8.38068 58.2841 8.38068C57.6818 8.38068 57.1572 8.5303 56.7102 8.82955C56.2633 9.125 55.9167 9.55682 55.6705 10.125C55.4242 10.6894 55.3011 11.375 55.3011 12.1818C55.3011 13.0114 55.4242 13.7083 55.6705 14.2727C55.9205 14.8371 56.2689 15.2633 56.7159 15.5511C57.1629 15.839 57.6799 15.983 58.267 15.983C58.5966 15.983 58.9015 15.9394 59.1818 15.8523C59.4659 15.7652 59.7178 15.6383 59.9375 15.4716C60.1572 15.3011 60.339 15.0947 60.483 14.8523C60.6307 14.6098 60.733 14.3333 60.7898 14.0227L63.2784 14.0341C63.214 14.5682 63.053 15.0833 62.7955 15.5795C62.5417 16.072 62.1989 16.5133 61.767 16.9034C61.339 17.2898 60.8277 17.5966 60.233 17.8239C59.642 18.0473 58.9735 18.1591 58.2273 18.1591C57.1894 18.1591 56.2614 17.9242 55.4432 17.4545C54.6288 16.9848 53.9848 16.3049 53.5114 15.4148C53.0417 14.5246 52.8068 13.447 52.8068 12.1818C52.8068 10.9129 53.0455 9.83333 53.5227 8.94318C54 8.05303 54.6477 7.375 55.4659 6.90909C56.2841 6.43939 57.2045 6.20455 58.2273 6.20455C58.9015 6.20455 59.5265 6.29924 60.1023 6.48864C60.6818 6.67803 61.1951 6.95455 61.642 7.31818C62.089 7.67803 62.4527 8.11932 62.733 8.64205C63.017 9.16477 63.1989 9.76326 63.2784 10.4375ZM65.0426 18V6.36364H69.6335C70.5161 6.36364 71.268 6.5322 71.8892 6.86932C72.5104 7.20265 72.9839 7.66667 73.3097 8.26136C73.6392 8.85227 73.804 9.53409 73.804 10.3068C73.804 11.0795 73.6373 11.7614 73.304 12.3523C72.9706 12.9432 72.4877 13.4034 71.8551 13.733C71.2263 14.0625 70.465 14.2273 69.571 14.2273H66.6449V12.2557H69.1733C69.6468 12.2557 70.0369 12.1742 70.3438 12.0114C70.6544 11.8447 70.8854 11.6155 71.0369 11.3239C71.1922 11.0284 71.2699 10.6894 71.2699 10.3068C71.2699 9.92045 71.1922 9.58333 71.0369 9.29545C70.8854 9.00379 70.6544 8.77841 70.3438 8.61932C70.0331 8.45644 69.6392 8.375 69.1619 8.375H67.5028V18H65.0426ZM76.0639 18H73.4276L77.4446 6.36364H80.6151L84.6264 18H81.9901L79.0753 9.02273H78.9844L76.0639 18ZM75.8991 13.4261H82.1264V15.3466H75.8991V13.4261ZM95.7472 10.4375H93.2585C93.2131 10.1155 93.1203 9.82955 92.9801 9.57955C92.84 9.32576 92.66 9.10985 92.4403 8.93182C92.2206 8.75379 91.9669 8.61742 91.679 8.52273C91.3949 8.42803 91.0862 8.38068 90.7528 8.38068C90.1506 8.38068 89.6259 8.5303 89.179 8.82955C88.732 9.125 88.3854 9.55682 88.1392 10.125C87.893 10.6894 87.7699 11.375 87.7699 12.1818C87.7699 13.0114 87.893 13.7083 88.1392 14.2727C88.3892 14.8371 88.7377 15.2633 89.1847 15.5511C89.6316 15.839 90.1487 15.983 90.7358 15.983C91.0653 15.983 91.3703 15.9394 91.6506 15.8523C91.9347 15.7652 92.1866 15.6383 92.4062 15.4716C92.6259 15.3011 92.8078 15.0947 92.9517 14.8523C93.0994 14.6098 93.2017 14.3333 93.2585 14.0227L95.7472 14.0341C95.6828 14.5682 95.5218 15.0833 95.2642 15.5795C95.0104 16.072 94.6676 16.5133 94.2358 16.9034C93.8078 17.2898 93.2964 17.5966 92.7017 17.8239C92.1108 18.0473 91.4422 18.1591 90.696 18.1591C89.6581 18.1591 88.7301 17.9242 87.9119 17.4545C87.0975 16.9848 86.4536 16.3049 85.9801 15.4148C85.5104 14.5246 85.2756 13.447 85.2756 12.1818C85.2756 10.9129 85.5142 9.83333 85.9915 8.94318C86.4688 8.05303 87.1165 7.375 87.9347 6.90909C88.7528 6.43939 89.6733 6.20455 90.696 6.20455C91.3703 6.20455 91.9953 6.29924 92.571 6.48864C93.1506 6.67803 93.6638 6.95455 94.1108 7.31818C94.5578 7.67803 94.9214 8.11932 95.2017 8.64205C95.4858 9.16477 95.6676 9.76326 95.7472 10.4375ZM107.778 10.4375H105.29C105.244 10.1155 105.152 9.82955 105.011 9.57955C104.871 9.32576 104.691 9.10985 104.472 8.93182C104.252 8.75379 103.998 8.61742 103.71 8.52273C103.426 8.42803 103.117 8.38068 102.784 8.38068C102.182 8.38068 101.657 8.5303 101.21 8.82955C100.763 9.125 100.417 9.55682 100.17 10.125C99.9242 10.6894 99.8011 11.375 99.8011 12.1818C99.8011 13.0114 99.9242 13.7083 100.17 14.2727C100.42 14.8371 100.769 15.2633 101.216 15.5511C101.663 15.839 102.18 15.983 102.767 15.983C103.097 15.983 103.402 15.9394 103.682 15.8523C103.966 15.7652 104.218 15.6383 104.438 15.4716C104.657 15.3011 104.839 15.0947 104.983 14.8523C105.131 14.6098 105.233 14.3333 105.29 14.0227L107.778 14.0341C107.714 14.5682 107.553 15.0833 107.295 15.5795C107.042 16.072 106.699 16.5133 106.267 16.9034C105.839 17.2898 105.328 17.5966 104.733 17.8239C104.142 18.0473 103.473 18.1591 102.727 18.1591C101.689 18.1591 100.761 17.9242 99.9432 17.4545C99.1288 16.9848 98.4848 16.3049 98.0114 15.4148C97.5417 14.5246 97.3068 13.447 97.3068 12.1818C97.3068 10.9129 97.5455 9.83333 98.0227 8.94318C98.5 8.05303 99.1477 7.375 99.9659 6.90909C100.784 6.43939 101.705 6.20455 102.727 6.20455C103.402 6.20455 104.027 6.29924 104.602 6.48864C105.182 6.67803 105.695 6.95455 106.142 7.31818C106.589 7.67803 106.953 8.11932 107.233 8.64205C107.517 9.16477 107.699 9.76326 107.778 10.4375Z"
          fill={isDark ? base.gray[100] : '#08193B'}
        />
        
        {/* Text: Mastery */}
        <path
          d="M52.8608 25.2727H54.7955L57.3864 31.5966H57.4886L60.0795 25.2727H62.0142V34H60.4972V28.0043H60.4162L58.0043 33.9744H56.8707L54.4588 27.9915H54.3778V34H52.8608V25.2727ZM65.5511 34.1321C65.1364 34.1321 64.7628 34.0582 64.4304 33.9105C64.1009 33.7599 63.8395 33.5384 63.6463 33.2457C63.456 32.9531 63.3608 32.5923 63.3608 32.1634C63.3608 31.794 63.429 31.4886 63.5653 31.2472C63.7017 31.0057 63.8878 30.8125 64.1236 30.6676C64.3594 30.5227 64.625 30.4134 64.9205 30.3395C65.2188 30.2628 65.527 30.2074 65.8452 30.1733C66.2287 30.1335 66.5398 30.098 66.7784 30.0668C67.017 30.0327 67.1903 29.9815 67.2983 29.9134C67.4091 29.8423 67.4645 29.733 67.4645 29.5852V29.5597C67.4645 29.2386 67.3693 28.9901 67.179 28.8139C66.9886 28.6378 66.7145 28.5497 66.3565 28.5497C65.9787 28.5497 65.679 28.6321 65.4574 28.7969C65.2386 28.9616 65.0909 29.1562 65.0142 29.3807L63.5739 29.1761C63.6875 28.7784 63.875 28.446 64.1364 28.179C64.3977 27.9091 64.7173 27.7074 65.0952 27.5739C65.473 27.4375 65.8906 27.3693 66.348 27.3693C66.6634 27.3693 66.9773 27.4062 67.2898 27.4801C67.6023 27.554 67.8878 27.6761 68.1463 27.8466C68.4048 28.0142 68.6122 28.2429 68.7685 28.5327C68.9276 28.8224 69.0071 29.1847 69.0071 29.6193V34H67.5241V33.1009H67.473C67.3793 33.2827 67.2472 33.4531 67.0767 33.6122C66.9091 33.7685 66.6974 33.8949 66.4418 33.9915C66.1889 34.0852 65.892 34.1321 65.5511 34.1321ZM65.9517 32.9986C66.2614 32.9986 66.5298 32.9375 66.7571 32.8153C66.9844 32.6903 67.1591 32.5256 67.2812 32.321C67.4062 32.1165 67.4688 31.8935 67.4688 31.652V30.8807C67.4205 30.9205 67.3381 30.9574 67.2216 30.9915C67.108 31.0256 66.9801 31.0554 66.8381 31.081C66.696 31.1065 66.5554 31.1293 66.4162 31.1491C66.277 31.169 66.1563 31.1861 66.054 31.2003C65.8239 31.2315 65.6179 31.2827 65.4361 31.3537C65.2543 31.4247 65.1108 31.5241 65.0057 31.652C64.9006 31.777 64.848 31.9389 64.848 32.1378C64.848 32.4219 64.9517 32.6364 65.1591 32.7812C65.3665 32.9261 65.6307 32.9986 65.9517 32.9986ZM75.7315 29.1847L74.3253 29.3381C74.2855 29.196 74.2159 29.0625 74.1165 28.9375C74.0199 28.8125 73.8892 28.7116 73.7244 28.6349C73.5597 28.5582 73.358 28.5199 73.1193 28.5199C72.7983 28.5199 72.5284 28.5895 72.3097 28.7287C72.0938 28.8679 71.9872 29.0483 71.9901 29.2699C71.9872 29.4602 72.0568 29.6151 72.1989 29.7344C72.3438 29.8537 72.5824 29.9517 72.9148 30.0284L74.0312 30.267C74.6506 30.4006 75.1108 30.6122 75.4119 30.902C75.7159 31.1918 75.8693 31.571 75.8722 32.0398C75.8693 32.4517 75.7486 32.8153 75.5099 33.1307C75.2741 33.4432 74.946 33.6875 74.5256 33.8636C74.1051 34.0398 73.6222 34.1278 73.0767 34.1278C72.2756 34.1278 71.6307 33.9602 71.142 33.625C70.6534 33.2869 70.3622 32.8168 70.2685 32.2145L71.7727 32.0696C71.8409 32.3651 71.9858 32.5881 72.2074 32.7386C72.429 32.8892 72.7173 32.9645 73.0724 32.9645C73.4389 32.9645 73.733 32.8892 73.9545 32.7386C74.179 32.5881 74.2912 32.402 74.2912 32.1804C74.2912 31.9929 74.2188 31.8381 74.0739 31.7159C73.9318 31.5937 73.7102 31.5 73.4091 31.4347L72.2926 31.2003C71.6648 31.0696 71.2003 30.8494 70.8991 30.5398C70.598 30.2273 70.4489 29.8324 70.4517 29.3551C70.4489 28.9517 70.5582 28.6023 70.7798 28.3068C71.0043 28.0085 71.3153 27.7784 71.7131 27.6165C72.1136 27.4517 72.5753 27.3693 73.098 27.3693C73.8651 27.3693 74.4688 27.5327 74.9091 27.8594C75.3523 28.1861 75.6264 28.6278 75.7315 29.1847ZM80.4126 27.4545V28.6477H76.6499V27.4545H80.4126ZM77.5788 25.8864H79.1214V32.0312C79.1214 32.2386 79.1527 32.3977 79.2152 32.5085C79.2805 32.6165 79.3658 32.6903 79.4709 32.7301C79.576 32.7699 79.6925 32.7898 79.8203 32.7898C79.9169 32.7898 80.005 32.7827 80.0845 32.7685C80.1669 32.7543 80.2294 32.7415 80.272 32.7301L80.532 33.9361C80.4496 33.9645 80.3317 33.9957 80.1783 34.0298C80.0277 34.0639 79.843 34.0838 79.6243 34.0895C79.2379 34.1009 78.8899 34.0426 78.5803 33.9148C78.2706 33.7841 78.0249 33.5824 77.843 33.3097C77.6641 33.0369 77.576 32.696 77.5788 32.2869V25.8864ZM84.5302 34.1278C83.8739 34.1278 83.3072 33.9915 82.8299 33.7188C82.3555 33.4432 81.9904 33.054 81.7347 32.5511C81.479 32.0455 81.3512 31.4503 81.3512 30.7656C81.3512 30.0923 81.479 29.5014 81.7347 28.9929C81.9933 28.4815 82.354 28.0838 82.8171 27.7997C83.2802 27.5128 83.8242 27.3693 84.4492 27.3693C84.8526 27.3693 85.2333 27.4347 85.5913 27.5653C85.9521 27.6932 86.2702 27.892 86.5458 28.1619C86.8242 28.4318 87.043 28.7756 87.2021 29.1932C87.3612 29.608 87.4407 30.1023 87.4407 30.6761V31.1491H82.0756V30.1094H85.962C85.9592 29.8139 85.8952 29.5511 85.7702 29.321C85.6452 29.0881 85.4705 28.9048 85.2461 28.7713C85.0245 28.6378 84.766 28.571 84.4705 28.571C84.1552 28.571 83.8782 28.6477 83.6396 28.8011C83.4009 28.9517 83.2148 29.1506 83.0813 29.3977C82.9506 29.642 82.8839 29.9105 82.881 30.2031V31.1108C82.881 31.4915 82.9506 31.8182 83.0898 32.0909C83.229 32.3608 83.4237 32.5682 83.6737 32.7131C83.9237 32.8551 84.2163 32.9261 84.5515 32.9261C84.7759 32.9261 84.979 32.8949 85.1609 32.8324C85.3427 32.767 85.5004 32.6719 85.6339 32.5469C85.7674 32.4219 85.8683 32.267 85.9364 32.0824L87.3768 32.2443C87.2859 32.625 87.1126 32.9574 86.8569 33.2415C86.604 33.5227 86.2802 33.7415 85.8853 33.8977C85.4904 34.0511 85.0387 34.1278 84.5302 34.1278ZM88.7457 34V27.4545H90.2415V28.5455H90.3097C90.429 28.1676 90.6335 27.8764 90.9233 27.6719C91.2159 27.4645 91.5497 27.3608 91.9247 27.3608C92.0099 27.3608 92.1051 27.3651 92.2102 27.3736C92.3182 27.3793 92.4077 27.3892 92.4787 27.4034V28.8224C92.4134 28.7997 92.3097 28.7798 92.1676 28.7628C92.0284 28.7429 91.8935 28.733 91.7628 28.733C91.4815 28.733 91.2287 28.794 91.0043 28.9162C90.7827 29.0355 90.608 29.2017 90.4801 29.4148C90.3523 29.6278 90.2884 29.8736 90.2884 30.152V34H88.7457ZM94.6616 36.4545C94.4513 36.4545 94.2567 36.4375 94.0778 36.4034C93.9016 36.3722 93.761 36.3352 93.6559 36.2926L94.0138 35.0909C94.2383 35.1563 94.4386 35.1875 94.6147 35.1847C94.7908 35.1818 94.9457 35.1264 95.0792 35.0185C95.2156 34.9134 95.3306 34.7372 95.4244 34.4901L95.5565 34.1364L93.1829 27.4545H94.8192L96.3278 32.3977H96.396L97.9087 27.4545H99.5494L96.9286 34.7926C96.8065 35.1392 96.6445 35.4361 96.4428 35.6832C96.2411 35.9332 95.994 36.1236 95.7013 36.2543C95.4116 36.3878 95.065 36.4545 94.6616 36.4545Z"
          fill={isDark ? base.gray[100] : '#08193B'}
        />
      </svg>
    )
  }
)

Logo.displayName = 'Logo'
